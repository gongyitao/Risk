# 工作模式说明

## 🎯 双模式设计理念

策略E+智能化系统支持**两种工作模式**，满足不同场景下的使用需求：

1. **自由模式**（Free Mode）- 独立使用
2. **工作流模式**（Workflow Mode）- 流程引导

---

## 🔄 模式切换

### 位置
在页面顶部模块选择器的右侧，有一个"工作流"切换按钮。

### 操作
- 点击按钮即可在两种模式间切换
- **自由模式**：按钮显示"工作流"
- **工作流模式**：按钮显示"自由模式"，高亮显示

---

## 📊 模式1：自由模式（默认）

### 🎨 特点
- ✅ **灵活自由**：可以直接跳到任何模块
- ✅ **独立使用**：每个模块都可以单独使用
- ✅ **快速高效**：适合有明确目标的用户
- ✅ **无需按序**：不需要遵循固定流程

### 🎯 适用场景

#### 场景1：快速查询
```
用户需求：只想快速查询某个数据
操作方式：直接使用"数据助手"模块
无需：后续的分析和报告步骤
```

#### 场景2：合规检查
```
用户需求：只想查询某个字段是否合规
操作方式：直接使用"知识库"模块
无需：前置的数据准备步骤
```

#### 场景3：生成报告
```
用户需求：数据已准备好，只需生成报告
操作方式：直接使用"报告生成"模块
无需：重新取数和分析
```

#### 场景4：特征分析
```
用户需求：已有数据，只想做特征挖掘
操作方式：直接使用"策略挖掘"模块
无需：重新取数
```

### 📋 四个模块独立功能

#### 📊 数据助手（Operation Agent）
**独立使用场景**：
- 快速查询某个数据
- 验证数据质量
- 测试SQL语句
- 数据探索和观察

**输入示例**：
```
"查询近30天逾期用户数量"
"提取用户基础信息表前100条"
"检查数据缺失率"
```

---

#### 🔍 策略挖掘（Insight Agent）
**独立使用场景**：
- 对已有数据做特征分析
- 验证某个特征的区分度
- 快速查看IV值排名
- 测试分箱效果

**输入示例**：
```
"计算年龄字段的IV值"
"对收入进行智能分箱"
"找出区分度最高的TOP5特征"
```

---

#### 📄 报告生成（Reporting Agent）
**独立使用场景**：
- 基于现有数据生成报告
- 查看历史策略效果
- 对比不同策略方案
- 快速生成演示材料

**输入示例**：
```
"生成年轻用户策略回测报告"
"对比新旧策略效果"
"生成换手分析报告"
```

---

#### 📚 知识库（Knowledge Agent）
**独立使用场景**：
- 合规咨询
- 制度查询
- 概念学习
- 历史案例查询

**输入示例**：
```
"民族字段可以用于拒绝规则吗？"
"什么是IV值？"
"查询策略审批流程"
```

---

## 🔁 模式2：工作流模式

### 🎨 特点
- ✅ **步骤引导**：系统按标准流程引导
- ✅ **进度可视**：显示当前在第几步
- ✅ **自动衔接**：完成一步后自动提示下一步
- ✅ **完整流程**：确保不遗漏关键步骤

### 📋 标准工作流程

```
┌──────────────┐
│  步骤1       │  数据助手
│  取数清洗   │  → 查询数据 → 质量检查 → 数据准备完成 ✓
└──────┬───────┘
       ↓ 自动提示进入下一步
┌──────────────┐
│  步骤2       │  策略挖掘
│  特征分析   │  → 计算IV值 → 智能分箱 → 推荐策略 ✓
└──────┬───────┘
       ↓ 自动提示进入下一步
┌──────────────┐
│  步骤3       │  报告生成
│  出报告     │  → 回测对比 → 换手分析 → 报告完成 ✓
└──────────────┘

随时可用：📚 知识库（合规检查、制度查询）
```

### 🎯 适用场景

#### 场景1：新手用户
```
特点：不熟悉风控策略分析流程
需求：需要系统引导完成完整分析
选择：工作流模式，按步骤操作
```

#### 场景2：标准分析
```
特点：需要完成完整的策略分析
需求：从取数到报告的全流程
选择：工作流模式，确保不遗漏步骤
```

#### 场景3：新策略开发
```
特点：从零开始开发新策略
需求：系统化的分析过程
选择：工作流模式，标准化流程
```

#### 场景4：培训演示
```
特点：向他人展示完整流程
需求：清晰的步骤展示
选择：工作流模式，可视化进度
```

### 🔄 工作流详细步骤

#### 步骤1：数据助手（约5-10分钟）

**目标**：获取清洗后的分析数据

**操作流程**：
1. 输入查询需求（如"查询近30天逾期用户"）
2. 系统生成SQL代码
3. 查看执行结果和数据质量
4. 确认数据可用

**完成标志**：
- ✓ 右侧显示数据表格
- ✓ 数据质量指标正常
- ✓ 系统提示"数据准备就绪"

**自动提示**：
```
✅ 步骤完成！
数据已准备就绪。是否继续下一步：策略挖掘？
[继续下一步 →] [稍后再说]
```

---

#### 步骤2：策略挖掘（约10-15分钟）

**目标**：找出风险区分度高的特征

**操作流程**：
1. 输入分析需求（如"挖掘高风险客群特征"）
2. 系统计算所有特征IV值
3. 查看TOP特征推荐
4. 查看分箱分析结果

**完成标志**：
- ✓ 右侧显示特征IV值图表
- ✓ 系统推荐策略规则
- ✓ 系统提示"特征分析完成"

**自动提示**：
```
✅ 步骤完成！
特征分析已完成。是否继续下一步：报告生成？
[继续下一步 →] [稍后再说]
```

---

#### 步骤3：报告生成（约5-10分钟）

**目标**：生成专业的策略分析报告

**操作流程**：
1. 输入报告需求（如"生成策略回测报告"）
2. 系统自动生成完整报告
3. 查看核心指标对比
4. 确认报告内容

**完成标志**：
- ✓ 右侧显示完整报告
- ✓ 包含回测数据和建议
- ✓ 系统提示"工作流程完成"

**完成提示**：
```
🎉 工作流程已全部完成！
您已完成完整的策略分析流程：
✓ 数据提取和清洗
✓ 特征挖掘和分析
✓ 策略报告生成

您可以：
📥 导出报告（Word/PDF/PPT）
🔄 开始新的分析流程
📚 查询知识库了解更多
```

---

## 💡 两种模式对比

| 维度 | 自由模式 | 工作流模式 |
|-----|---------|-----------|
| **灵活性** | ⭐⭐⭐⭐⭐ 非常灵活 | ⭐⭐⭐ 中等 |
| **引导性** | ⭐ 无引导 | ⭐⭐⭐⭐⭐ 强引导 |
| **适合人群** | 熟练用户 | 新手用户 |
| **使用场景** | 特定任务 | 完整流程 |
| **效率** | 快速定向 | 系统全面 |
| **步骤提示** | ❌ 无 | ✅ 有 |
| **进度追踪** | ❌ 无 | ✅ 有 |
| **自动衔接** | ❌ 无 | ✅ 有 |

---

## 🎯 使用建议

### 什么时候用自由模式？

✅ **推荐使用自由模式：**
- 你很熟悉系统功能
- 只需要使用某一个模块
- 时间紧急，需要快速完成
- 只想验证某个特定内容
- 需要频繁切换不同功能

### 什么时候用工作流模式？

✅ **推荐使用工作流模式：**
- 你是新手，不熟悉流程
- 需要完成完整的策略分析
- 想要确保不遗漏步骤
- 需要向他人演示完整流程
- 希望获得系统引导和提示

---

## 🚀 快速上手

### 体验自由模式

1. 打开 `workspace.html`（默认就是自由模式）
2. 直接点击任意模块（如"报告生成"）
3. 选择一个快捷建议
4. 查看生成的结果

**时间**：1-2分钟

---

### 体验工作流模式

1. 打开 `workspace.html`
2. 点击顶部右侧的"工作流"按钮
3. 阅读系统提示的流程说明
4. 按照步骤1→2→3完成流程
5. 观察每步完成后的自动提示

**时间**：5-10分钟

---

## 📊 实际案例

### 案例1：快速查询（自由模式）

**用户需求**：只想看看昨天有多少逾期用户

**操作步骤**：
1. 直接点击"数据助手"
2. 输入"查询昨天的逾期用户数量"
3. 查看结果
4. 完成 ✓

**耗时**：1分钟

---

### 案例2：新策略开发（工作流模式）

**用户需求**：开发一个针对年轻用户的风控策略

**操作步骤**：
1. 切换到工作流模式
2. **步骤1**：数据助手 - 查询年轻用户数据
3. 系统提示继续 → 点击"继续下一步"
4. **步骤2**：策略挖掘 - 分析特征和分箱
5. 系统提示继续 → 点击"继续下一步"
6. **步骤3**：报告生成 - 生成回测报告
7. 完成 ✓

**耗时**：10-15分钟

---

## ❓ 常见问题

### Q1: 可以在工作流模式下跳步骤吗？
**A**: 可以！即使在工作流模式下，您也可以随时点击任意模块。工作流模式只是提供引导，不强制限制。

### Q2: 步骤完成标记会保存吗？
**A**: 当前会话中会保存。刷新页面后会重置。未来版本将支持持久化保存。

### Q3: 知识库为什么显示"随时可用"？
**A**: 因为知识库（合规检查、制度查询）不属于主流程的一部分，可以在任何时候使用，不影响工作流进度。

### Q4: 如何知道当前在哪一步？
**A**: 在工作流模式下，每个模块按钮会显示"步骤X"，当前激活的模块会高亮显示，完成的步骤会有✓标记。

### Q5: 可以回退到上一步吗？
**A**: 可以！直接点击前面的模块按钮即可。步骤完成标记不会清除，您可以重新操作。

---

## 📝 设计说明

### 为什么设计两种模式？

#### 业务考虑
- **新手友好**：工作流模式降低学习门槛
- **专家高效**：自由模式提供最大灵活性
- **场景多样**：满足不同任务需求

#### 技术实现
- **独立功能**：每个模块都可独立运行
- **松耦合**：模块间通过数据传递而非强依赖
- **可扩展**：未来可以添加更多模块和流程

---

## 🎓 最佳实践

### 建议的学习路径

1. **第1天**：使用工作流模式，完整走一遍流程
2. **第2-3天**：继续使用工作流模式，熟悉每个步骤
3. **第4天**：尝试切换到自由模式，快速完成特定任务
4. **第5天后**：根据实际需求灵活选择模式

### 团队协作建议

- **新员工培训**：使用工作流模式演示
- **日常工作**：根据任务选择模式
- **紧急任务**：使用自由模式快速响应
- **标准化分析**：使用工作流模式确保质量

---

**文档版本**: V1.0  
**最后更新**: 2026-01-14  
**维护人员**: AI助手
