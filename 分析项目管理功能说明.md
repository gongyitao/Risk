# 📊 分析项目管理功能说明

## 🎯 功能背景

### 用户需求

> "策略人员每次沟通对话，完成整个工作流程后，是不是还得有一个页面来可以查看和管理分析的结论及关联的原始脚本和数据的页面？"

### 需求分析

```
策略分析师完成一次完整的分析工作流后：

数据助手 → 策略挖掘 → 报告生成

需要：
✅ 查看分析结论（报告摘要）
✅ 查看原始SQL脚本
✅ 查看数据快照
✅ 复用历史分析
✅ 导出完整报告
✅ 管理所有分析项目

→ 需要一个"分析项目管理"页面
```

---

## 🚀 核心功能

### 1. 项目列表展示

#### 功能描述
以卡片形式展示所有历史分析项目，每个卡片包含：
- 项目标题和描述
- 项目状态（已完成/进行中/草稿）
- 创建人和创建时间
- 总耗时
- 项目标签
- 核心数据指标

#### 使用场景
```
场景1：快速浏览历史分析
策略分析师 → 打开项目管理页 → 浏览所有项目卡片

场景2：查找特定项目
策略分析师 → 使用搜索框 → 输入"年轻用户" → 找到相关项目
```

---

### 2. 筛选和搜索

#### 筛选功能
- **按状态筛选**：全部/已完成/进行中/草稿
- **按时间范围筛选**：今天/最近7天/最近30天/最近90天/全部时间

#### 搜索功能
- 支持搜索：项目名称、描述、标签
- 实时搜索，输入即过滤

#### 视图切换
- **列表视图**（默认）：详细信息展示
- **网格视图**：卡片式紧凑展示

---

### 3. 项目详情查看⭐

#### 打开项目详情
点击项目卡片的"👁️ 打开项目"按钮，弹出详情模态框

#### 详情内容包括

##### 📋 项目信息
```
创建人：张三
创建时间：2026-01-12 15:30
总耗时：45分钟
项目状态：已完成
样本量：45,230
```

##### 📊 分析结论
完整的策略分析结论，包括：
- 核心发现
- 风险特征分析
- 策略建议
- 预期效果

示例：
```
分析结论：
通过对45,230个样本的深入分析，我们发现18-24岁年轻用户群体存在以下显著风险特征：

1. 收入不稳定：该群体月收入波动大于±30%的比例达到58.3%
2. 负债率高：平均负债率为67.8%，显著高于全平台平均（45.2%）
3. 逾期倾向：历史逾期率为24.5%，是整体逾期率（14.2%）的1.7倍

策略建议：
建议对符合以下条件的年轻用户进行拦截：
- 年龄 ≤ 24岁
- 月收入 < 5000元 或 收入波动 > 30%
- 负债率 > 60%
- 历史逾期次数 ≥ 1次

预期效果：
- 预计拦截率：18.5%
- 坏账率改善：-3.2pp（从14.2%降至11.0%）
- KS值提升：+8.3%
- 年化损失减少：约¥450万元
```

##### 💻 原始SQL脚本
```sql
-- 年轻用户风险样本提取
SELECT 
    user_id,
    age,
    monthly_income,
    income_volatility,
    debt_ratio,
    overdue_count
FROM user_credit_table
WHERE age BETWEEN 18 AND 24
  AND create_time >= DATE_SUB(NOW(), INTERVAL 90 DAY)
ORDER BY create_time DESC
LIMIT 50000;
```

功能按钮：
- **复制代码**：一键复制SQL到剪贴板
- **复用到工作台**：将SQL加载到工作台继续编辑

##### 📈 数据快照
数据质量和特征重要度：
- 总记录数：45,230
- 坏账用户数：6,422
- 整体坏账率：14.2%
- 特征重要度排序（IV值）

##### 🔄 工作流程记录
完整的分析流程时间线：
```
✓ 数据助手 - 10分钟
  提取45,230个样本，8个特征字段

✓ 策略挖掘 - 20分钟
  IV值分析，识别5个高区分度特征

✓ 报告生成 - 15分钟
  生成完整策略回测报告，预期效果评估
```

---

### 4. 项目操作功能

#### 单个项目操作
- **👁️ 打开项目**：查看完整详情
- **📥 导出**：导出完整报告（Word/PDF/Excel）
- **📋 复制**：复制项目继续编辑
- **🗑️ 删除**：删除项目（需确认）

#### 批量操作
- **批量导出**：导出所有项目报告

---

### 5. 项目状态管理

#### 三种状态

##### ✅ 已完成（Completed）
- 完成了完整的工作流程：数据助手 → 策略挖掘 → 报告生成
- 绿色标识
- 可查看、导出、复用

##### 🔄 进行中（In Progress）
- 正在进行分析，未完成全流程
- 蓝色标识
- 显示当前进度（如："数据助手 → 策略挖掘 (60%)"）
- 可继续编辑

##### 📝 草稿（Draft）
- 已创建但未开始分析
- 灰色标识
- 可继续编辑或删除

---

## 📖 使用流程

### 完整使用流程

```
步骤1：完成分析工作流
工作台 → 数据助手 → 策略挖掘 → 报告生成 → 完成

步骤2：系统自动保存项目
系统自动创建项目记录，保存：
- 分析结论
- SQL脚本
- 数据快照
- 工作流程

步骤3：在项目管理页查看
点击顶部导航"项目管理" → 查看所有历史项目

步骤4：查看项目详情
点击"打开项目"按钮 → 查看完整分析内容

步骤5：复用或导出
- 点击"复制代码"→ 复用SQL脚本
- 点击"复用到工作台"→ 继续编辑
- 点击"导出完整报告"→ 下载报告文件
```

---

## 🎨 界面设计

### 页面布局

```
┌─────────────────────────────────────────────────────────┐
│ 导航栏: [首页] [工作台] [项目管理] [知识库]              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📊 分析项目管理                [批量导出] [新建分析]    │
│  查看、管理和复用您的历史分析项目                        │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 状态: [全部(12)] [已完成(8)] [进行中(3)] [草稿(1)]│   │
│  │ 时间: [最近30天 ▼]          搜索框   [网格][列表]│   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ✅ 已完成                        [👁️][📥][📋][🗑️]│   │
│  │                                                 │   │
│  │ 年轻用户风险拦截策略分析                         │   │
│  │ 针对18-24岁年轻用户群体的风险特征分析...        │   │
│  │                                                 │   │
│  │ 👤 张三  📅 2026-01-12 15:30  ⏱️ 45分钟        │   │
│  │ [年轻用户] [风险拦截] [已上线]                   │   │
│  │                                                 │   │
│  │ 样本量: 45,230 | 拦截率: 18.5% | 坏账率:-3.2pp  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🔄 进行中                       [👁️][📥][📋][🗑️]│   │
│  │                                                 │   │
│  │ 低收入客群准入策略优化                           │   │
│  │ 针对月收入5000元以下客群的准入标准优化...        │   │
│  │                                                 │   │
│  │ 进度: ▓▓▓▓▓▓░░░░ 60%  数据助手 → 策略挖掘       │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  [<] [1] [2] [3] ... [10] [>]                          │
└─────────────────────────────────────────────────────────┘
```

### 项目详情弹窗

```
┌───────────────────────────────────────────────────────┐
│ 年轻用户风险拦截策略分析                          [×] │
├───────────────────────────────────────────────────────┤
│                                                       │
│ 📋 项目信息                                           │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 创建人: 张三        创建时间: 2026-01-12 15:30  │ │
│ │ 总耗时: 45分钟      项目状态: ✅ 已完成          │ │
│ │ 样本量: 45,230                                  │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 📊 分析结论                                           │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 通过对45,230个样本的深入分析，我们发现...      │ │
│ │ 1. 收入不稳定：58.3%                           │ │
│ │ 2. 负债率高：67.8%                             │ │
│ │ 3. 逾期倾向：24.5%                             │ │
│ │ ...                                            │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 💻 原始SQL脚本                  [复制代码][复用到工作台]│
│ ┌─────────────────────────────────────────────────┐ │
│ │ SELECT user_id, age, monthly_income...         │ │
│ │ FROM user_credit_table                         │ │
│ │ WHERE age BETWEEN 18 AND 24...                 │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 📈 数据快照                                           │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 总记录数: 45,230 | 坏账用户: 6,422 | 坏账率:14.2%│ │
│ │ 特征重要度排序（IV值）:                         │ │
│ │ • 历史逾期次数: 0.67 (极高)                    │ │
│ │ • 负债率: 0.51 (极高)                          │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 🔄 工作流程记录                                       │
│ ┌─────────────────────────────────────────────────┐ │
│ │ ✓ 数据助手 - 10分钟                            │ │
│ │ ✓ 策略挖掘 - 20分钟                            │ │
│ │ ✓ 报告生成 - 15分钟                            │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│            [导出完整报告] [复制项目]                  │
└───────────────────────────────────────────────────────┘
```

---

## 💡 使用场景

### 场景1：复用历史分析

```
背景：
策略分析师需要分析"25-30岁用户"，
之前已经分析过"18-24岁用户"。

操作流程：
1. 打开项目管理页
2. 找到"年轻用户风险拦截策略分析"项目
3. 点击"打开项目"
4. 点击"复用到工作台"
5. 在工作台修改SQL中的年龄范围：18-24 → 25-30
6. 重新执行分析流程

优势：
✅ 节省时间：不用重新写SQL
✅ 保持一致：分析方法和指标一致
✅ 避免遗漏：确保所有必要字段都包含
```

---

### 场景2：导出完整报告

```
背景：
风控经理需要向管理层汇报策略效果，
需要一份完整的分析报告。

操作流程：
1. 打开项目管理页
2. 找到对应的分析项目
3. 点击"导出完整报告"
4. 选择导出格式（Word/PDF/Excel）
5. 下载报告文件
6. 直接用于汇报

导出内容包含：
✅ 分析结论
✅ 数据图表
✅ SQL脚本
✅ 核心指标
✅ 策略建议
```

---

### 场景3：对比多个策略

```
背景：
需要对比"年轻用户拦截"和"多头借贷拦截"
两个策略的效果。

操作流程：
1. 打开项目管理页
2. 依次打开两个项目的详情
3. 对比核心指标：
   - 年轻用户：拦截率18.5%，坏账率改善-3.2pp
   - 多头借贷：识别准确率92.3%，坏账率改善-5.1pp
4. 决策：优先上线"多头借贷拦截策略"

优势：
✅ 并排对比：同时查看多个项目
✅ 数据支撑：基于真实数据做决策
✅ 快速决策：不需要重新分析
```

---

### 场景4：追踪分析进度

```
背景：
策略分析师同时进行3个分析项目，
需要追踪每个项目的进度。

操作流程：
1. 打开项目管理页
2. 筛选"进行中"的项目
3. 查看每个项目的进度条：
   - 项目A：60%（策略挖掘阶段）
   - 项目B：30%（数据助手阶段）
   - 项目C：90%（报告生成阶段）
4. 优先完成项目C
5. 切换到工作台继续项目C

优势：
✅ 清晰掌握进度
✅ 合理安排时间
✅ 避免项目遗漏
```

---

## 🔧 技术实现

### 数据结构

```javascript
const project = {
    id: 'proj-001',                          // 项目ID
    title: '年轻用户风险拦截策略分析',          // 项目标题
    description: '针对18-24岁年轻用户...',    // 项目描述
    status: 'completed',                     // 状态
    author: '张三',                          // 创建人
    createTime: '2026-01-12 15:30',         // 创建时间
    duration: '45分钟',                      // 总耗时
    tags: ['年轻用户', '风险拦截', '已上线'],  // 标签
    conclusion: '...',                       // 分析结论（HTML）
    sqlCode: 'SELECT ...',                   // SQL脚本
    dataSnapshot: {                          // 数据快照
        totalRecords: 45230,
        badUserCount: 6422,
        badRate: 14.2,
        features: [...]                      // 特征列表
    },
    workflow: [                              // 工作流程
        { step: '数据助手', status: 'completed', time: '10分钟' },
        { step: '策略挖掘', status: 'completed', time: '20分钟' },
        { step: '报告生成', status: 'completed', time: '15分钟' }
    ],
    stats: {                                 // 核心指标
        sampleSize: '45,230',
        rejectRate: '18.5%',
        badRateImprovement: '-3.2pp',
        ksImprovement: '+8.3%'
    }
};
```

### 核心函数

```javascript
// 打开项目详情
function openProject(projectId) {
    const project = mockProjects[projectId];
    // 生成详情HTML并显示在模态框中
}

// 导出项目
function exportProject(projectId) {
    // 将项目数据导出为Word/PDF/Excel
}

// 复制SQL代码
function copySQLCode(projectId) {
    // 复制SQL到剪贴板
}

// 复用到工作台
function reuseSQLCode(projectId) {
    // 将SQL加载到工作台localStorage
    // 跳转到工作台页面
}
```

---

## 📊 业务价值

### 1. 提升效率

```
复用历史分析：
- 节省SQL编写时间：70%
- 节省特征选择时间：50%
- 总体效率提升：60%

对比分析：
- 快速对比多个策略
- 基于数据做决策
- 减少重复劳动
```

### 2. 知识沉淀

```
✅ 保存所有历史分析
✅ 积累策略经验
✅ 新人快速学习
✅ 避免重复分析
```

### 3. 团队协作

```
✅ 查看同事的分析
✅ 复用优秀案例
✅ 统一分析方法
✅ 提升整体水平
```

### 4. 管理可视化

```
✅ 追踪分析进度
✅ 统计完成数量
✅ 评估工作量
✅ 合理分配资源
```

---

## 🎯 未来规划

### V1.8 计划（1-2周）
- [ ] 项目标签管理（自定义标签）
- [ ] 项目收藏功能
- [ ] 项目评论和笔记
- [ ] 项目版本历史

### V2.0 计划（1-2月）
- [ ] 项目权限管理（公开/私有/团队）
- [ ] 项目协作功能（多人编辑）
- [ ] 项目模板库（快速创建）
- [ ] 数据对接（真实项目自动保存）

### V2.5 计划（2-3月）
- [ ] 项目统计分析（效率报告）
- [ ] 智能推荐（相似项目推荐）
- [ ] 自动化报告生成
- [ ] 项目对比工具

---

## 📝 使用建议

### 最佳实践

1. **及时保存项目**
   - 完成分析后立即保存
   - 填写清晰的项目标题和描述
   - 添加合适的标签便于检索

2. **善用搜索和筛选**
   - 使用关键词搜索快速定位
   - 按时间范围筛选最近项目
   - 按状态筛选未完成项目

3. **复用优质项目**
   - 查看已完成项目的分析方法
   - 复用SQL脚本提升效率
   - 学习优秀案例的分析思路

4. **定期导出备份**
   - 重要项目导出完整报告
   - 定期批量导出备份
   - 离线保存关键分析

5. **保持项目整洁**
   - 及时删除草稿项目
   - 完成进行中的项目
   - 定期清理过期项目

---

## ❓ 常见问题

### Q1: 项目数据保存在哪里？
**A**: 当前版本数据保存在浏览器localStorage中。V2.0版本将对接后端数据库，实现云端同步。

### Q2: 能否修改已完成的项目？
**A**: 当前版本不支持直接修改，但可以复制项目到工作台继续编辑，生成新的项目。

### Q3: 导出的报告格式是什么？
**A**: 当前版本模拟导出功能。V2.0版本将支持Word、PDF、Excel三种格式导出。

### Q4: 能否共享项目给其他同事？
**A**: V2.0版本将支持项目权限管理和团队协作功能。

### Q5: 项目数量有限制吗？
**A**: 当前版本无限制。实际生产环境建议定期清理旧项目，保持系统性能。

---

## 🎉 总结

**分析项目管理**功能完美解决了策略人员的核心需求：

```
✅ 查看分析结论 - 完整的策略分析报告
✅ 查看原始脚本 - SQL代码可复制可复用
✅ 查看数据快照 - 关键数据和特征
✅ 管理历史分析 - 统一的项目管理页面
✅ 导出完整报告 - 支持多种格式
✅ 复用优质案例 - 提升工作效率

这不仅是一个查看页面，
更是一个知识沉淀和协作平台。
```

---

**立即体验**: 打开 `projects.html`，查看您的分析项目！📊

**文档版本**: V1.7  
**最后更新**: 2026-01-15  
**维护团队**: 风控策略部 × 平台开发部
